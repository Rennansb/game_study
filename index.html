<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Miss√£o de Estudo</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=MedievalSharp&display=swap');
        
        .font-medieval { font-family: 'MedievalSharp', cursive; }

        @keyframes fade-in {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        @keyframes fade-in-up {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        @keyframes pulse-strong {
            0%, 100% { transform: scale(1); box-shadow: 0 0 0 0 rgba(212, 160, 23, 0.7); }
            50% { transform: scale(1.05); box-shadow: 0 0 20px 10px rgba(212, 160, 23, 0); }
        }
        @keyframes scoreUpdate {
            0%, 100% { transform: scale(1); color: #fff; }
            50% { transform: scale(1.2); color: #f0b90b; }
        }
        @keyframes unlock {
            0% { transform: scale(0.9); filter: grayscale(100%); opacity: 0.5; }
            50% { transform: scale(1.1); filter: grayscale(50%); opacity: 0.75; box-shadow: 0 0 30px #f0b90b; }
            100% { transform: scale(1); filter: grayscale(0%); opacity: 1; }
        }
        @keyframes fade-in-out {
            0%, 100% { opacity: 0; transform: translateY(20px); }
            10%, 90% { opacity: 1; transform: translateY(0); }
        }
        @keyframes glow {
            0%, 100% { filter: drop-shadow(0 0 5px #f0b90b); }
            50% { filter: drop-shadow(0 0 15px #f5d042); }
        }
        .animate-fade-in { animation: fade-in 0.5s ease-out forwards; }
        .animate-fade-in-up { animation: fade-in-up 0.5s ease-out forwards; }
        .animate-pulse-strong { animation: pulse-strong 1.5s infinite; }
        .animate-scoreUpdate { animation: scoreUpdate 0.6s ease-in-out; }
        .animate-unlock { animation: unlock 0.8s ease-out forwards; }
        .animate-save-notification { animation: fade-in-out 3s ease-in-out forwards; }
        .animate-glow { animation: glow 2s ease-in-out infinite; }
        
        /* --- Character Animations --- */
        #character-svg { transition: transform 0.3s ease-in-out; }

        /* Idle State */
        .character-idle #main-group { animation: idle-breath 4s ease-in-out infinite; }
        .character-idle #eyelids { animation: blink 5s ease-in-out infinite 1s; }
        .character-idle #pupils { animation: eye-dart 8s ease-in-out infinite 2s; }

        /* Moving State */
        .character-moving #main-group { animation: walk-bob 1.2s ease-in-out infinite; }
        .character-moving #left-leg, .character-moving #right-arm-group { animation: walk-limbs 1.2s ease-in-out infinite alternate; }
        .character-moving #right-leg, .character-moving #sword-arm-group { animation: walk-limbs 1.2s ease-in-out infinite alternate-reverse; }
        .character-moving #eyelids { animation: blink 2s ease-in-out infinite; }

        /* Other States */
        .character-thinking #head { transform: translateY(1px) rotate(-5deg); }
        .character-thinking #mouth-serious { animation: talk 0.8s ease-in-out infinite; }
        
        .character-success #main-group { animation: success-jump 0.8s ease-out forwards; }
        .character-success #mouth-smile { opacity: 1; }
        .character-success #mouth-serious { opacity: 0; }

        .character-fail #main-group { animation: fail-slump 0.5s ease-out forwards; }
        .character-fail #head { animation: fail-shake 0.5s ease-in-out forwards; }
        .character-salute #sword-arm-group { animation: salute-pose 1.2s ease-in-out forwards; }
        
        /* Keyframes */
        @keyframes idle-breath { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-1.5px); } }
        @keyframes eye-dart {
            0%, 80%, 100% { transform: translateX(0); }
            85% { transform: translateX(-1.5px); }
            95% { transform: translateX(1px); }
        }
        @keyframes blink { 0%, 95%, 100% { transform: scaleY(1); } 97.5% { transform: scaleY(0.1); } }
        @keyframes talk { 0%, 100% { transform: scaleY(1); } 50% { transform: scaleY(1.3) translateY(0.5px); } }

        @keyframes walk-bob { 0%, 100% { transform: translateY(0) rotate(1deg); } 50% { transform: translateY(-4px) rotate(-1deg); } }
        @keyframes walk-limbs { from { transform: rotate(-25deg); } to { transform: rotate(25deg); } }
        @keyframes success-jump { 0%, 100% { transform: translateY(0) rotate(0); } 50% { transform: translateY(-15px) rotate(5deg); } }
        @keyframes fail-slump { 0% { transform: translateY(0) rotate(0); } 100% { transform: translateY(5px) rotate(-3deg); } }
        @keyframes fail-shake { 0%, 100% { transform: translateX(0); } 25% { transform: translateX(-5px); } 75% { transform: translateX(5px); } }
        @keyframes salute-pose { 0% { transform: rotate(0deg) } 50% { transform: rotate(-20deg) translateY(-5px) } 100% { transform: rotate(0deg) } }

        .game-map-background {
            background-color: #eaddc7;
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 1200 800'%3E%3Cdefs%3E%3Cfilter id='paper' x='0' y='0' width='100%25' height='100%25'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.04' numOctaves='5' stitchTiles='stitch'/%3E%3CfeColorMatrix type='saturate' values='0'/%3E%3C/filter%3E%3C/defs%3E%3Crect width='100%25' height='100%25' filter='url(%23paper)'/%3E%3C/svg%3E");
        }
        .map-path {
            position: absolute;
            height: 4px;
            background: repeating-linear-gradient(90deg, #78350f, #78350f 10px, transparent 10px, transparent 20px);
            transform-origin: 0 50%;
            z-index: 10;
        }
        .castle-interior-background {
            background-color: #27272a;
            background-image:
                linear-gradient(rgba(0, 0, 0, 0.5) 2px, transparent 2px),
                linear-gradient(90deg, rgba(0, 0, 0, 0.5) 2px, transparent 2px),
                linear-gradient(rgba(0, 0, 0, 0.3) 1px, transparent 1px),
                linear-gradient(90deg, rgba(0, 0, 0, 0.3) 1px, transparent 1px);
            background-size: 100px 100px, 100px 100px, 20px 20px, 20px 20px;
            background-position: -2px -2px, -2px -2px, -1px -1px, -1px -1px;
            border: 10px solid #3f3f46;
        }

        .door-frame { transform-style: preserve-3d; perspective: 1000px; }
        .door { transform-origin: left; transition: transform 0.5s cubic-bezier(0.68, -0.55, 0.27, 1.55); }
        .door-open .door { transform: rotateY(-110deg); }

        .flicker { animation: flicker 2s infinite; }
        @keyframes flicker {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.8; }
        }
        .torch-flame { animation: flicker 1.5s ease-in-out infinite; }
        @keyframes torch-glow {
            0%, 100% { filter: drop-shadow(0 0 35px rgba(245, 158, 11, 0.9)); }
            50% { filter: drop-shadow(0 0 50px rgba(250, 204, 21, 1)); }
        }
        .torch-glow { animation: torch-glow 2.5s ease-in-out infinite; }
        
        .guard-defeated { animation: fade-in 0.5s; }

        @keyframes guard-idle-1 { 0%,100%{transform:translateY(0)} 50%{transform:translateY(-2px)} .guard-head{transform:rotate(-2deg)} }
        @keyframes guard-idle-2 { 0%,100%{transform:rotate(0)} 50%{transform:rotate(1deg)} .guard-spear{transform:rotate(-1deg)} }
        @keyframes guard-idle-3 { 0%,100%{ .guard-head{transform:rotate(0)} } 50%{ .guard-head{transform:rotate(3deg) translateX(1px)} } }
        @keyframes guard-idle-4 { 0%,100%{ .guard-right-arm{transform:rotate(0)} } 50%{ .guard-right-arm{transform:rotate(-5deg)} } }
        @keyframes guard-idle-5 { 0%,100%{ .guard-body-group{transform:translateX(0)} } 50%{ .guard-body-group{transform:translateX(1px)} } }
        @keyframes guard-idle-6 { 0%,100%{ .guard-head{transform:rotate(0)} } 25%{ .guard-head{transform:rotate(-3deg)} } 75%{ .guard-head{transform:rotate(2deg)} } }
        @keyframes guard-idle-7 { 0%,100%{transform:translateY(0)} 20%{transform:translateY(-3px)} 40%{transform:translateY(0)} 60%{transform:translateY(-1px)} 80%{transform:translateY(0)} }
        @keyframes guard-idle-8 { 0%,100%{ .guard-spear{transform:rotate(0)} } 50%{ .guard-spear{transform:rotate(2deg) translateY(-2px)} } }
        @keyframes guard-idle-9 { 0%,100%{ .guard-helmet circle{opacity:1} } 50%{ .guard-helmet circle{opacity:0.5; transform:scale(0.8)} } }
        @keyframes guard-idle-10{ 0%,100%{transform:scaleX(1)} 50%{transform:scaleX(1.02)} }

        .guard-idle-1{animation:guard-idle-1 2.5s ease-in-out infinite}
        .guard-idle-2{animation:guard-idle-2 3s ease-in-out infinite}
        .guard-idle-3{animation:guard-idle-3 2.8s ease-in-out infinite}
        .guard-idle-4{animation:guard-idle-4 2.2s ease-in-out infinite}
        .guard-idle-5{animation:guard-idle-5 3.5s ease-in-out infinite}
        .guard-idle-6{animation:guard-idle-6 4s ease-in-out infinite}
        .guard-idle-7{animation:guard-idle-7 2s ease-in-out infinite}
        .guard-idle-8{animation:guard-idle-8 3.2s ease-in-out infinite}
        .guard-idle-9{animation:guard-idle-9 2.6s ease-in-out infinite}
        .guard-idle-10{animation:guard-idle-10 3.8s ease-in-out infinite}

        @keyframes sink-door {
            from { transform: translateY(0); }
            to { transform: translateY(100%); }
        }
        .door-sinking .stone-door { animation: sink-door 1s ease-in forwards; }

        @keyframes level-up {
            0% { transform: scale(1); box-shadow: 0 0 0 0 #facc15; }
            50% { transform: scale(1.5); box-shadow: 0 0 30px 15px #facc15; }
            100% { transform: scale(1); box-shadow: 0 0 0 0 #facc15; }
        }
        .animate-level-up { animation: level-up 1.2s ease-in-out; }
        @keyframes heart-pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }
        .animate-heart-pulse { animation: heart-pulse 1.5s ease-in-out infinite; }

        @keyframes dramatic-text-reveal {
            0% { opacity: 0; transform: translateY(30px) scale(0.9); letter-spacing: 0.5em; }
            70% { opacity: 1; transform: translateY(0) scale(1.05); letter-spacing: normal; }
            100% { opacity: 1; transform: scale(1); letter-spacing: normal; }
        }
        
        .character-slashing #main-group {
             animation: dash-lunge 0.5s ease-out forwards;
        }
        .character-slashing #sword-arm-group {
            animation: sword-arc-slash 0.5s cubic-bezier(0.2, 0.8, 0.2, 1) forwards;
        }

        @keyframes dash-lunge {
            0% { transform: translateX(10px) rotate(2deg); }
            40% { transform: translateX(-5px) rotate(-5deg); }
            100% { transform: translateX(0) rotate(0); }
        }
        @keyframes sword-arc-slash {
            0% { transform: rotate(0deg); } /* Start from idle */
            25% { transform: rotate(30deg); } /* Wind up back and up */
            60% { transform: rotate(-70deg); } /* Slash through with force */
            100% { transform: rotate(0deg); } /* Recover */
        }
        @keyframes draw-slash-path {
            to { stroke-dashoffset: 0; }
        }

        @keyframes checkbox-burn {
            0% { opacity: 1; transform: scale(0.5); filter: url(#fire-effect); }
            100% { opacity: 0; transform: scale(3); filter: url(#fire-effect); }
        }
        
        @keyframes rune-glow {
            0%, 100% { filter: drop-shadow(0 0 3px #f59e0b); opacity: 0.8; }
            50% { filter: drop-shadow(0 0 8px #fef08a); opacity: 1; }
        }
        
        .mission-scroll-background {
            background-color: #f3e9d2;
            background-image:
                radial-gradient(circle at center, rgba(255, 255, 255, 0.3) 0%, rgba(255, 255, 255, 0) 60%),
                repeating-linear-gradient(to bottom, transparent, transparent 39px, #c8bda9 40px);
            border: 10px solid #4a3f35;
            box-shadow: 0 10px 30px rgba(0,0,0,0.5);
        }

        @keyframes screen-shake {
            0% { transform: translate(1px, 1px) rotate(0deg); }
            10% { transform: translate(-1px, -2px) rotate(-1deg); }
            20% { transform: translate(-3px, 0px) rotate(1deg); }
            30% { transform: translate(3px, 2px) rotate(0deg); }
            40% { transform: translate(1px, -1px) rotate(1deg); }
            50% { transform: translate(-1px, 2px) rotate(-1deg); }
            60% { transform: translate(-3px, 1px) rotate(0deg); }
            70% { transform: translate(3px, 1px) rotate(-1deg); }
            80% { transform: translate(-1px, -1px) rotate(1deg); }
            90% { transform: translate(1px, 2px) rotate(0deg); }
            100% { transform: translate(1px, -2px) rotate(-1deg); }
        }
        .animate-screen-shake {
            animation: screen-shake 0.6s cubic-bezier(.36,.07,.19,.97) both;
        }
        @keyframes crack-in {
            0% { letter-spacing: 1em; transform: scale(1.5); opacity: 0; }
            40% { opacity: 0.6; }
            100% { letter-spacing: normal; transform: scale(1); opacity: 1; }
        }
        .animate-crack-in {
            animation: crack-in 0.8s cubic-bezier(0.250, 0.460, 0.450, 0.940) both;
        }
        
        @keyframes twinkle {
            0%, 100% { opacity: 0.2; transform: scale(0.8); }
            50% { opacity: 1; transform: scale(1.2); }
        }
        .star { animation: twinkle 4s ease-in-out infinite; }

        .start-stone {
            transition: all 0.3s ease;
            filter: drop-shadow(0 0 10px rgba(250, 204, 21, 0.3));
        }
        .start-stone:hover {
            filter: drop-shadow(0 0 25px rgba(250, 204, 21, 0.7));
            transform: scale(1.02);
        }

    </style>
<script type="importmap">
{
  "imports": {
    "react/": "https://aistudiocdn.com/react@^19.1.1/",
    "react": "https://aistudiocdn.com/react@^19.1.1",
    "@google/genai": "https://aistudiocdn.com/@google/genai@^1.17.0",
    "react-dom/": "https://aistudiocdn.com/react-dom@^19.1.1/"
  }
}
</script>
</head>
<body class="bg-gray-900">
    <div id="root"></div>
    <svg style="display:none">
      <defs>
        <filter id="fire-effect">
          <feTurbulence type="fractalNoise" baseFrequency="0.1 0.4" numOctaves="2" seed="2" result="turbulence"/>
          <feDisplacementMap in2="turbulence" in="SourceGraphic" scale="10" xChannelSelector="R" yChannelSelector="G"/>
          <feGaussianBlur stdDeviation="1.5" />
          <feColorMatrix type="matrix" values="1 0 0 0 0, 0 1 0 0 0, 0 0 1 0 0, 0 0 0 20 -10"/>
        </filter>
      </defs>
    </svg>
    <script src="dist/bundle.js"></script>
</body>
</html>